"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// test/utils/logger.test.ts
const logger_1 = require("../src/logger");
describe('Logger', () => {
    const consoleSpy = {
        log: jest.spyOn(console, 'log').mockImplementation(),
        warn: jest.spyOn(console, 'warn').mockImplementation(),
        error: jest.spyOn(console, 'error').mockImplementation(),
    };
    beforeEach(() => {
        consoleSpy.log.mockClear();
        consoleSpy.warn.mockClear();
        consoleSpy.error.mockClear();
        logger_1.logger.setDebug(false);
    });
    describe('Debug mode is required for logging', () => {
        it('should not log when debug is disabled', () => {
            logger_1.logger.log('test message');
            expect(consoleSpy.log).not.toHaveBeenCalled();
            expect(consoleSpy.warn).not.toHaveBeenCalled();
            expect(consoleSpy.error).not.toHaveBeenCalled();
        });
        it('should not log warnings when debug is disabled', () => {
            logger_1.logger.warn('warning message');
            expect(consoleSpy.log).not.toHaveBeenCalled();
            expect(consoleSpy.warn).not.toHaveBeenCalled();
            expect(consoleSpy.error).not.toHaveBeenCalled();
        });
        it('should not log errors when debug is disabled', () => {
            logger_1.logger.error('error message');
            expect(consoleSpy.log).not.toHaveBeenCalled();
            expect(consoleSpy.warn).not.toHaveBeenCalled();
            expect(consoleSpy.error).not.toHaveBeenCalled();
        });
        it('should log when debug is enabled', () => {
            logger_1.logger.setDebug(true);
            logger_1.logger.log('test message');
            expect(consoleSpy.log).toHaveBeenCalledWith('test message');
            expect(consoleSpy.warn).not.toHaveBeenCalled();
            expect(consoleSpy.error).not.toHaveBeenCalled();
        });
        it('should log warnings when debug is enabled', () => {
            logger_1.logger.setDebug(true);
            logger_1.logger.warn('warning message');
            expect(consoleSpy.log).not.toHaveBeenCalled();
            expect(consoleSpy.warn).toHaveBeenCalledWith('warning message');
            expect(consoleSpy.error).not.toHaveBeenCalled();
        });
        it('should log errors when debug is enabled', () => {
            logger_1.logger.setDebug(true);
            logger_1.logger.error('error message');
            expect(consoleSpy.log).not.toHaveBeenCalled();
            expect(consoleSpy.warn).not.toHaveBeenCalled();
            expect(consoleSpy.error).toHaveBeenCalledWith('error message');
        });
    });
    describe('Fatal error logging', () => {
        it('should always show error messages regardless of debug mode', () => {
            logger_1.logger.fatal('error message');
            expect(consoleSpy.error).toHaveBeenCalledTimes(1);
            expect(consoleSpy.error).toHaveBeenCalledWith('error message');
        });
    });
});

/*
 * Copyright 2021 Amazon.com, Inc. or its affiliates. All rights reserved.
 *
 * AMAZON PROPRIETARY/CONFIDENTIAL
 *
 * You may not use this file except in compliance with the terms and
 * conditions set forth in the accompanying LICENSE.TXT file.
 *
 * THESE MATERIALS ARE PROVIDED ON AN "AS IS" BASIS. AMAZON SPECIFICALLY
 * DISCLAIMS, WITH RESPECT TO THESE MATERIALS, ALL WARRANTIES, EXPRESS,
 * IMPLIED, OR STATUTORY, INCLUDING THE IMPLIED WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE, AND NON-INFRINGEMENT.
 *
 * @flow
 * @format
 */

 import {createViewConfig} from '../NativeComponent/ViewConfig';
 import {type PartialViewConfig} from '../Renderer/shims/ReactNativeTypes';
 import * as ReactNativeViewConfigRegistry from '../Renderer/shims/ReactNativeViewConfigRegistry';
 import getNativeComponentAttributes from '../ReactNative/getNativeComponentAttributes';
 import verifyComponentAttributeEquivalence from './verifyComponentAttributeEquivalence';
 
 // File is imported from an older version of RN; should be removed in favor of using NativeComponentRegistry
 // See https://github.com/facebook/react-native/commit/6a547c6c573b5fe9c457c3fc01aa19e0ebdacad3
 
 function registerGeneratedViewConfig(
   componentName: string,
   partialViewConfig: PartialViewConfig,
 ) {
   const staticViewConfig = createViewConfig(partialViewConfig);
 
   ReactNativeViewConfigRegistry.register(componentName, () => {
     if (!global.RN$Bridgeless) {
       const nativeViewConfig = getNativeComponentAttributes(componentName);
 
       verifyComponentAttributeEquivalence(nativeViewConfig, staticViewConfig);
     }
 
     return staticViewConfig;
   });
 }
 
 module.exports = registerGeneratedViewConfig;

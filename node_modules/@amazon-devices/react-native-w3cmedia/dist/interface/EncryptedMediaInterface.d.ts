/// <reference types="react" />
import { AddEventListenerOptions, EventListener, EventTarget } from "./EventTargetInterface";
import { BufferSource } from "./Utils";
/**
 * Specifies the encryption related initialization data
 * formats accepted by EME implementation.
 *
 * For more information, see
 * https://www.w3.org/TR/eme-initdata-registry/.
 */
export declare type InitDataType = "cenc" | "webm" | "keyids" | "";
/**
 * required:
 *
 *      When used in a call to requestMediaKeySystemAccess(),
 *          the returned object must support this feature.
 *       When returned by a MediaKeySystemAccess object,
 *      CDM instances created by the object may use this feature.
 *
 * optional:
 *
 *      When used in a call to requestMediaKeySystemAccess(),
 *          the returned object may support and use this feature.
 *      When returned by a MediaKeySystemAccess object,
 *          this value cannot and must not be present in such an object.
 *
 * not-allowed:
 *
 *      When used in a call to requestMediaKeySystemAccess(),
 *          the returned object must function without using this feature and must not use it at any time.
 *      When returned by a MediaKeySystemAccess object
 *          CDM instances created by the object must not use this feature.
 *
 * For more information, see
 * https://www.w3.org/TR/encrypted-media/#dom-mediakeysrequirement.
 */
export declare type MediaKeysRequirement = "required" | "optional" | "not-allowed";
/**
 * Specifies the type of Media Key Session.
 *
 * temporary:
 *
 *     A session for which the license, key(s), and record of or data related to the session are not persisted.
 *
 * persistent-license:
 *
 *      A session for which the license (and potentially other data related to the session) are persisted
 *
 * For more information, see
 * https://www.w3.org/TR/encrypted-media/#dom-mediakeysessiontype.
 */
export declare type MediaKeySessionType = "temporary" | "persistent-license";
/**
 * Indicates the status of the media key.
 *
 * usable:
 *
 *       The CDM is certain the key is currently usable for decryption.
 *
 * expired:
 *
 *      The key is no longer usable for decryption because its expiration time has passed.
 *
 * released:
 *
 *       The key itself is no longer available to the CDM, but information about the key,
 *          such as a record of license destruction, is available.
 *
 * output-restricted:
 *
 *      There are output restrictions associated with the key that cannot currently be met.
 *                      Media data decrypted with this key may be blocked from presentation,
 *                      if necessary according to the output restrictions.
 *
 * output-downscaled:
 *
 *           There are output restrictions associated with the key that cannot currently be met.
 *                     Media data decrypted with this key may be presented at a lower quality (e.g., resolution),
 *                     if necessary according to the output restrictions.
 *                     The application should avoid using streams that will trigger the output
 *                     restrictions associated with the key.
 *
 * status-pending:
 *
 *       The status of the key is not yet known and is being determined.
 *                 The status is updated with the actual status when it has been determined.
 *
 * internal-error:
 *
 *       The key is not currently usable for decryption because of an error in the CDM unrelated to the other values.
 *                 This value is not actionable by the application.
 *
 * For more information, see
 * https://www.w3.org/TR/encrypted-media/#dom-mediakeystatus.
 */
export declare type MediaKeyStatus = "usable" | "expired" | "released" | "output-restricted" | "output-downscaled" | "status-pending" | "internal-error";
/**
 * Indicates the media key message type.
 *
 * license-request:
 *
 *      The message contains a request for a new license.
 * license-renewal:
 *
 *      The message contains a request to renew an existing license.
 * license-release:
 *
 *      The message contains a record of license destruction.
 * individualization-request:
 *
 *      The message contains a request for App-Assisted
 *          Individualization (or re-individualization).
 *
 * For more information, see
 * https://www.w3.org/TR/encrypted-media/#dom-mediakeymessagetype.
 */
export declare type MediaKeyMessageType = "license-request" | "license-renewal" | "license-release" | "individualization-request";
/**
 * SECURE: Use secure video buffers
 * NON-SECURE:
 *
 *      Use non-secure video buffers.
 * HW_SECURE_ALL:
 *
 *      Use secure video buffers using secure crypto and decode in TEE.
 * SW_SECURE_CRYPTO:
 *
 *      Crypto operations in CPU.
 * SW_SECURE_DECODE:
 *
 *      Decode operations in CPU.
 * HW_SECURE_CRYPTP:
 *
 *      Crypto operations in TEE.
 * HW_SECURE_DECODE:
 *
 *      Decode operations in TEE.
 * 2000:
 *
 *      PlayReady SL2000.
 * 3000:
 *
 *      PlayReady SL3000.
 * 150:
 *      PlayReady SL150.
 */
export declare type Robustness = "SECURE" | "NON-SECURE" | "HW_SECURE_ALL" | "SW_SECURE_CRYPTO" | "SW_SECURE_DECODE" | "HW_SECURE_CRYPTO" | "HW_SECURE_DECODE" | "2000" | "3000" | "150";
/**
 * Specifies the robustness of a key system for a mime type.
 *
 * For more information, see
 * https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemmediacapability.
 */
export interface MediaKeySystemMediaCapability {
    /**
     * The mime type of the content
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemmediacapability-contenttype.
     */
    contentType: string;
    /**
     * The robustness level associated with the content type.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemmediacapability-robustness.
     */
    robustness: Robustness;
    /**
     * The encryption scheme associated with the content type.
     *
     * For more information, see
     * https://w3c.github.io/encrypted-media/#dom-mediakeysystemmediacapability-encryptionscheme
     */
    encryptionScheme?: string;
}
/**
 * https://www.w3.org/TR/encrypted-media/#mediakeysystemconfiguration-dictionary
 */
export interface MediaKeySystemConfiguration {
    /**
     * An optional label that is preserved in the
     * MediaKeySystemConfiguration returned from the getConfiguration()
     * method of MediaKeySystemAccess.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemconfiguration-label.
     */
    label?: string;
    /**
     * A list of supported Initialization Data Type names.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemconfiguration-initdatatypes.
     */
    initDataTypes?: Array<string>;
    /**
     * A list of supported audio type and capability pairs.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemconfiguration-audiocapabilities.
     */
    audioCapabilities?: Array<MediaKeySystemMediaCapability>;
    /**
     * A list of supported video type and capability pairs.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemconfiguration-videocapabilities.
     */
    videoCapabilities?: Array<MediaKeySystemMediaCapability>;
    /**
     * Defaults to "optional". Whether use of a Distinctive Identifier(s) is required.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemconfiguration-distinctiveidentifier.
     */
    distinctiveIdentifier?: MediaKeysRequirement;
    /**
     * Whether the ability to persist state is required.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemconfiguration-persistentstate.
     */
    persistentState?: MediaKeysRequirement;
    /**
     * A list of MediaKeySessionTypes that must be supported
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemconfiguration-sessiontypes.
     */
    sessionTypes?: Array<MediaKeySessionType>;
}
/**
 * A read-only map of key IDs to the current status of the associated key.
 *
 * For more information, see
 * https://www.w3.org/TR/encrypted-media/#dom-mediakeystatusmap
 */
export interface MediaKeyStatusMap {
    readonly size: number;
    /**
     * Checks if they key status for the key id is present in the map.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeystatusmap-has.
     * @param keyId The key ID of the key.
     */
    has(keyId: BufferSource): boolean;
    /**
     * Gets the media key status.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeystatusmap-get.
     * @param keyId The key ID of the key.
     */
    get(keyId: BufferSource): MediaKeyStatus | undefined;
    forEach(callbackfn: (value: MediaKeyStatus, key: BufferSource, parent: MediaKeyStatusMap) => void, thisArg?: any): void;
}
/**
 * Media Key message event.
 *
 * For more information, see
 * https://www.w3.org/TR/encrypted-media/#dom-mediakeymessageevent.
 */
export interface MediaKeyMessageEvent extends Event {
    /**
     * The type of the message.
     */
    readonly messageType: MediaKeyMessageType;
    /**
     * The message from the CDM. Messages are Key System-specific.
     */
    readonly message: BufferSource;
    readonly target: EventTarget | any;
}
/**
 * Event that is dispatched when
 * there has been a change in the keys in the session or their status.
 *
 * For more information, see
 * https://www.w3.org/TR/encrypted-media/#dom-evt-keystatuseschange.
 */
export interface KeyStatusesChangeEvent {
    readonly usable: boolean;
    readonly map: MediaKeyStatusMap;
}
/**
 * Map of media key status event.
 */
export interface MediaKeySessionEventMap {
    "keystatuseschange": Event;
    "message": MediaKeyMessageEvent;
}
/**
 * This represents a media key session.
 *
 * For more information, see
 * https://www.w3.org/TR/encrypted-media/#mediakeysession-interface.
 */
export interface MediaKeySession extends EventTarget {
    /**
     * The Session ID for this object and the associated key(s) or license(s).
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysession-sessionid.
     */
    readonly sessionId: string;
    /**
     * The expiration time for all key(s) in the session,
     * or NaN if no such time exists or if the license explicitly never expires,
     * as determined by the CDM.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysession-expiration.
     */
    readonly expiration: number;
    /**
     * Signals when the object becomes closed as a result
     * of the Session Closed algorithm being run.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysession-closed.
     */
    readonly closed: Promise<void> | null;
    /**
     * A reference to a read-only map of key IDs known to the session to the current status of the associated key.
     * Each entry has a unique key ID.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysession-keystatuses.
     */
    readonly keyStatuses: MediaKeyStatusMap | null;
    /**
     * Event handler for the "keystatuseschange" event.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysession-onkeystatuseschange.
     */
    onkeystatuseschange: ((this: MediaKeySession, ev: Event) => any) | null;
    /**
     * Event handler for the "message" event.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysession-onmessage.
     */
    onmessage: ((this: MediaKeySession, ev: MediaKeyMessageEvent) => any) | null;
    /**
     * Generates a license request based on the initData.
     * A message of type "license-request" or "individualization-request"
     * will always be queued if the algorithm succeeds and the promise is resolved.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysession-generaterequest.
     * @param initDataType  The Initialization Data Type of the initData.
     * @param initData  Initialization Data.
     */
    generateRequest(initDataType: string, initData: BufferSource): Promise<void>;
    /**
     * Loads the data stored for the specified session into this object.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysession-load
     * @param sessionId The Session ID of the session to load.
     */
    load(sessionId: string): Promise<boolean> | null;
    /**
     * Provides messages, including licenses, to the CDM.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysession-update.
     * @param response A message to be provided to the CDM.
     * @return Promise<void> that will get fulfilled when method executes successfully.
     * The contents are Key System-specific. It must not contain executable code.
     */
    update(response: BufferSource): Promise<void>;
    /**
     * Indicates that the application no longer needs the session and the CDM should release any resources
     * associated with the session and close it. Persisted data is not released or cleared.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysession-close.
     */
    close(): Promise<void> | null;
    /**
     * Removes all license(s) and key(s) associated with the session.
     * For persistent session types, other session data will be cleared
     * as defined for each session type once a release message
     * acknowledgment is processed by update().
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysession-remove.
     */
    remove(): Promise<void> | null;
    /**
     * Adds an even listener.
     * @param type Type of event.
     * @param listener Event handler.
     * @param options Ignored.
     */
    addEventListener<K extends keyof MediaKeySessionEventMap>(type: K, listener: (this: MediaKeySession, ev: MediaKeySessionEventMap[K]) => any | EventListener, options?: boolean | AddEventListenerOptions): void;
    /**
     * Adds an even listener.
     * @param type Type of event.
     * @param listener Event handler.
     * @param options Ignored.
     */
    addEventListener(type: string, listener: EventListener, options?: AddEventListenerOptions | boolean): void;
}
/**
 * The MediaKeysPolicy object represents a set of policy requirements.
 * Each policy requirement is an option field.
 *
 * For more information, see
 * https://www.w3.org/TR/encrypted-media/#dom-mediakeyspolicy
 */
export interface MediaKeysPolicy {
    /**
     * Represents HDMI policy.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeys-getstatusforpolicy
     * https://www.w3.org/TR/eme-hdcp-version-registry/
     */
    minHdcpVersion: string;
}
/**
 * The MediaKeys object represents a set of keys that an associated
 * HTMLMediaElement can use for decryption of media data during playback.
 * It also represents a CDM instance.
 *
 * For more information, see
 * https://www.w3.org/TR/encrypted-media/#mediakeys-interface
 */
export interface MediaKeys {
    /**
     * Creates a new MediaKeySession object.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeys-createsession.
     * @param sessionType  The type of session to create.
     *       The session type affects the behavior of the returned object.
     */
    createSession(sessionType?: MediaKeySessionType): MediaKeySession;
    /**
     * Provides a server certificate to be used to encrypt messages to the license server.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeys-setservercertificate.
     * @param serverCertificate The server certificate.
     * The contents are Key System-specific. It must not contain executable code.
     * @return Promise<boolean> Resolved when certificate is successfully set. Reject if failed.
     */
    setServerCertificate(serverCertificate: BufferSource): Promise<boolean>;
    /**
     * Returns a MediaKeyStatus for a given MediaKeysPolicy.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeys-getstatusforpolicy
     */
    getStatusForPolicy(policy?: MediaKeysPolicy): Promise<MediaKeyStatus>;
}
/**
 * The MediaKeySystemAccess object provides access to a Key System.
 *
 * For more information, see
 * https://www.w3.org/TR/encrypted-media/#mediakeysystemaccess-interface.
 */
export interface MediaKeysSystemAccess {
    /**
     * Identifies the Key System being used.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemaccess-keysystem.
     */
    readonly keySystem: string;
    /**
     * Returns the supported combination of configuration options selected by
     * requestMediaKeySystemAccess().
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemaccess-getconfiguration.
     *
     * @return MediaKeySystemConfiguration
     */
    getConfiguration(): MediaKeySystemConfiguration | null;
    /**
     * Creates a new MediaKeys object for keySystem.
     *
     * For more information, see
     * https://www.w3.org/TR/encrypted-media/#dom-mediakeysystemaccess-createmediakeys.
     *
     * @return Promise<MediaKeys>, resolved when successfully created a MediaKeys, rejected
     * otherwise.
     */
    createMediaKeys(): Promise<MediaKeys> | void;
}
/**
 * Execption thrown when:
 * 1. The existing MediaKeys object cannot be removed.
 * 2. The key system is not supported.
 * 3. The initialization data type is not supported by the key system.
 * 4. The session type is not supported by the key system.
 * 5. The initialization data is not supported by the key system.
 * 6. The operation is not supported by the key system.
 *
 * For more information, see
 * https://www.w3.org/TR/encrypted-media/#dfn-NotSupportedError.
 */
interface NotSupportedError extends Error {
}
interface NotSupportedErrorConstructor extends ErrorConstructor {
    new (message?: string): NotSupportedError;
    (message?: string): NotSupportedError;
    readonly prototype: NotSupportedError;
}
export declare let NotSupportedError: NotSupportedErrorConstructor;
/**
 * Execption thrown when:
 * 1. The existing MediaKeys object cannot be removed at this time.
 * 2. The session has already been used.
 * 3. The session is not yet initialized.
 * 4. The session is closed.
 *
 * For more information, see
 * https://www.w3.org/TR/encrypted-media/#dfn-InvalidStateError.
 */
interface InvalidStateError extends Error {
}
interface InvalidStateErrorConstructor extends ErrorConstructor {
    new (message?: string): InvalidStateError;
    (message?: string): InvalidStateError;
    readonly prototype: InvalidStateError;
}
export declare let InvalidStateError: InvalidStateErrorConstructor;
/**
 * Execption thrown when the MediaKeys object cannot be used with additional HTMLMediaElements.
 * A non-closed session already exists for this sessionId.
 *
 * For more information, see
 *  https://www.w3.org/TR/encrypted-media/#dfn-QuotaExceededError.
 */
interface QuotaExceededError extends Error {
}
interface QuotaExceededErrorConstructor extends ErrorConstructor {
    new (message?: string): QuotaExceededError;
    (message?: string): QuotaExceededError;
    readonly prototype: QuotaExceededError;
}
export declare let QuotaExceededError: QuotaExceededErrorConstructor;
export {};

import { MediaElementEventRouter } from "../MediaElementEventRouter";
import * as NativeInterfaces from "../turbo-modules/NativeInterface";
import { AddEventListenerOptions, EventListener, EventListenerOptions, EventTarget } from "./EventTargetInterface";
import { Resolution } from "@amazon-devices/keplermediadescriptor";
import { EndOfStreamError, MediaSourceHandle, MediaSourceInterface, ReadyState, SourceBuffer, SourceBufferList } from "./MediaSourceInterface";
import { EventAttributes } from '../EventAttributes';
/**
 * @hidden
 */
declare class BlobData {
    blobId: number;
    offset: number;
}
/**
 * @hidden
 */
export declare const GlobalMediaSources: Map<number, MediaSource>;
/**
 * Implements the `MediaSource` interface. It uses `EventEmitter` to emit events.
 * Maintains a list of `SourceBuffers` object and Active Source buffers.
 */
export declare class MediaSource extends EventAttributes implements EventTarget, MediaSourceInterface, MediaSourceHandle, Blob {
    private eventEmitter;
    private mediaElement;
    private readyState_;
    private mediaElementEventRouter;
    private sourceBuffersList;
    private activeSourceBuffersList;
    private static idGen;
    private id;
    private _onsourceopen;
    private _onsourceended;
    private _onsourceclose;
    constructor();
    /**
     * @hidden
     */
    static install(): void;
    /**
     * @hidden
     */
    size: number;
    /**
     * @hidden
     */
    type: string;
    /**
     * @hidden
     */
    data: BlobData;
    /**
     * @hidden
     */
    slice(start?: number | undefined, end?: number | undefined): Blob;
    /**
     * @hidden
     */
    setMediaElementHandle(mediaElement: NativeInterfaces.NativeMediaElement): void;
    /**
     * @hidden
     */
    setMediaEventRouter(mediaElementEventRouter: MediaElementEventRouter | null): void;
    addEventListener(type: string, listener: EventListener, options?: AddEventListenerOptions | boolean): void;
    removeEventListener(type: string, listener: EventListener, options?: EventListenerOptions | boolean): void;
    /**
     * @hidden
     * Currently, addsourcebuffer and removesourcebuffer doesn't give us the
     * id of the source buffers. So when we get a add or remove source buffer event
     * on active source buffer we will re-build the list from turbo module.
     * @note: This thing needs to be re-designed as there could be synchronization problems
     * leading to mismatch in the list maintained by native or crash in app while accessing
     * activeSourceBuffers
     */
    private rebuildActiveSourceBuffersList;
    /**
     * @hidden
     * Handle events from native turbo module
     */
    handleEvent(eventName: string): void;
    canConstructInDedicatedWorker: true;
    /**
     * Gets the source buffers added to the media source.
     * For additional information, see
     * https://www.w3.org/TR/media-source-2/#dom-mediasource-sourcebuffers.
     */
    get sourceBuffers(): SourceBufferList;
    /**
     * Gets the active source buffers of mediasource.
     * For additional information, see
     * https://www.w3.org/TR/media-source-2/#dom-mediasource-activesourcebuffers.
     */
    get activeSourceBuffers(): SourceBufferList;
    /**
     * Gets the ready state of MediaSource.
     * For additional information, see
     * https://www.w3.org/TR/media-source-2/#dom-mediasource-readystate.
     */
    get readyState(): ReadyState;
    /**
     * Gets the duraton of the content.
     * For additional information, see
     * https://www.w3.org/TR/media-source-2/#dom-mediasource-duration.
     */
    get duration(): number;
    /**
     * Sets the duraton of the content.
     * For additional information, see
     * https://www.w3.org/TR/media-source-2/#dom-mediasource-duration.
     */
    set duration(duration: number);
    /**
     * For additional information, see
     * https://www.w3.org/TR/media-source-2/#dom-mediasource-onsourceopen
     */
    set onsourceopen(listener: EventListener);
    /**
     * For additional information, see
     * https://www.w3.org/TR/media-source-2/#dom-mediasource-onsourceended
     */
    set onsourceended(listener: EventListener);
    /**
     * For additional information, see
     * https://www.w3.org/TR/media-source-2/#dom-mediasource-onsourceclose
     */
    set onsourceclose(listener: EventListener);
    /**
     * Get max supported resolution based on the decoder profile.
     */
    getMaxSupportedResolution(mimestr: string): Resolution;
    /**
     * Adds a SourceBuffer to the media source based on mime type.
     * For additional information, see
     * https://www.w3.org/TR/media-source-2/#dom-mediasource-addsourcebuffer.
     * @param type The mime type of data sent to source buffer.
     */
    addSourceBuffer(type: string): SourceBuffer;
    /**
     * Removes the source buffer from media source.
     * For additional information, see
     * https://www.w3.org/TR/media-source-2/#dom-mediasource-removesourcebuffer.
     * @param sourceBuffer source buffer instance to be removed.
     */
    removeSourceBuffer(sourceBuffer: SourceBuffer): void;
    /**
     * Signals the end of stream for media source.
     * For additional information, see
     * https://www.w3.org/TR/media-source-2/#dom-mediasource-endofstream.
     * @param error (optional) EndOfStreamError
     */
    endOfStream(error?: EndOfStreamError): void;
    /**
     * Sets the start and end seek range for live.
     * For additional information, see
     * https://www.w3.org/TR/media-source-2/#dom-mediasource-setliveseekablerange.
     * @param start Start position of the seek range of a live content in seconds.
     * @param end  End position of the seek range of a live content in seconds.
     */
    setLiveSeekableRange(start: number, end: number): void;
    /**
     * Clears the previously set live seek range.
     * For additional information, see
     * https://www.w3.org/TR/media-source-2/#dom-mediasource-clearliveseekablerange.
     */
    clearLiveSeekableRange(): void;
    /**
     * @hidden
     */
    getHandle(): MediaSourceHandle;
    /**
     * Checks whehter the mime type is supported by the Media source.
     * For additional information, see
     * https://www.w3.org/TR/media-source-2/#dom-mediasource-istypesupported.
     * @param type mime type.
     */
    static isTypeSupported(type: string): boolean;
    /**
     * @hidden
     */
    private transitionToState;
}
export {};

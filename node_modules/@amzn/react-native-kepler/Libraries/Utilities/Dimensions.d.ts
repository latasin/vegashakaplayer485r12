/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * Portions of this file are copyright (c) 2023 Amazon.com, Inc. or its affiliates.  All rights reserved.
 *
 * PORTIONS OF THIS FILE ARE AMAZON PROPRIETARY/CONFIDENTIAL.  USE IS SUBJECT TO LICENSE TERMS.
 *
 * Amazon modifications are indicated by [amznmod_* comments].
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 * @format
 */

/**
 * Changelog:
 * - Add DisplayMetricsKepler
 * - Add 'windows' for getting dimensions per window on kepler
 * - Add useKeplerWindowDimensions
 */

import {EmitterSubscription} from '../vendor/emitter/EventEmitter';

// Used by Dimensions below
export interface ScaledSize {
  width: number;
  height: number;
  scale: number;
  fontScale: number;
}

// amznmod_react - Add DisplayMetrics

export interface DisplayMetrics {
   			 width: number;
   			 height: number;
   			 scale: number;
   			 fontScale: number;
}
		 
// amznmod_react - Add DisplayMetricsKepler
/**
 * Kepler window Dimensions with module name
 * @platform kepler
 */
export interface DisplayMetricsKepler {
  width: number;
  height: number;
  scale: number;
  fontScale: number;
  moduleName: string;
}

/**
 * Initial dimensions are set before `runApplication` is called so they should
 * be available before any other require's are run, but may be updated later.
 *
 * Note: Although dimensions are available immediately, they may change (e.g
 * due to device rotation) so any rendering logic or styles that depend on
 * these constants should try to call this function on every render, rather
 * than caching the value (for example, using inline styles rather than
 * setting a value in a `StyleSheet`).
 *
 * @example
 * ```
 * const {height, width} = Dimensions.get('window');
 * ```
 *
 * @param dim - Name of dimension as defined when calling `set`.
 * @returns Value for the dimension.
 * @see https://reactnative.dev/docs/dimensions#content
 */
export interface Dimensions {
  // amznmod_react - Add 'windows' for getting dimensions per window on kepler
  // @amznmod_react - add 'physical' for getting physical resolution on kepler
  /**
     * Initial dimensions are set before runApplication is called so they
     * should be available before any other require's are run, but may be
     * updated later.
     * Note: Although dimensions are available immediately, they may
     * change (e.g due to device rotation) so any rendering logic or
     * styles that depend on these constants should try to call this
     * function on every render, rather than caching the value (for
     * example, using inline styles rather than setting a value in a
     * StyleSheet).
     * @example
     * ```
     * const {height, width} = Dimensions.get('window');
     * ```
     @param dim - Name of dimension as defined when calling set.
     @returns Value for the dimension.
     */
  get(
    dim: 'window' | 'screen' | 'windows' | 'physical',
  ): ScaledSize | DisplayMetricsKepler;

  /**
   * This should only be called from native code by sending the didUpdateDimensions event.
   * @param dims Simple string-keyed object of dimensions to set
   */
  set(dims: {[key: string]: any}): void;

  // amznmod_react - Add 'windows' for dimensions per window on kepler
  // @amznmod_react - add 'physical' for physical resolution on kepler
  /**
   * Add an event listener for dimension changes
   *
   * @param type - the type of event to listen to
   * @param handler - the event handler
   */
  addEventListener(
    type: 'change',
    handler: ({
      window,
      screen,
      windows,
      physical,
    }: {
      window: ScaledSize;
      screen: ScaledSize;
      windows: DisplayMetricsKepler[];
      physical: ScaledSize;
    }) => void,
  ): EmitterSubscription;

  addEventListenerV2(
    type: 'didUpdateDimensions',
    handler: ({dimensions}: {dimensions: DisplayMetrics}) => void,
  ): EmitterSubscription;
}

export function useWindowDimensions(): ScaledSize;

// amznmod_react - Add useKeplerWindowDimensions
export function useKeplerWindowDimensions(): ScaledSize;

export function useKeplerWindowDimensionsV2(): ScaledSize;

export const Dimensions: Dimensions;
